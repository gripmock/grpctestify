--- ADDRESS ---
localhost:50058

--- ENDPOINT ---
shopflow.ProductService/GetProduct

--- REQUEST ---
{
  "product_id": "550e8400-e29b-41d4-a716-446655440000",
  "include_metadata": true
}

--- ASSERTS ---
.success == true
.product | type == "object"

# UUID validation
@uuid(.product.id) == true
@uuid(.product.category_id, "v4") == true

# Timestamp validation  
@timestamp(.product.created_at, "iso8601") == true
@timestamp(.product.updated_at, "rfc3339") == true
@timestamp(.product.unix_timestamp, "unix") == true

# URL validation
@url(.product.image_url, "https") == true
@url(.product.thumbnail_url) == true

# Email validation
@email(.product.vendor.contact_email) == true
@email(.product.vendor.support_email, "strict") == true

# IP address validation
@ip(.metadata.client_ip, "v4") == true
@ip(.metadata.server_ip) == true

# Advanced validations using jq with type functions
.product.id | test("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$")
.product.price | type == "number" and . > 0
.product.vendor.website | test("^https://[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$")
.product.tags | type == "array" and length > 0
.metadata.version | test("^[0-9]+\\.[0-9]+\\.[0-9]+$")

--- OPTIONS ---
timeout: 30
