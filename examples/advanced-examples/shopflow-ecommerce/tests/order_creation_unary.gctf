--- ADDRESS ---
localhost:4770

--- ENDPOINT ---
shopflow.ShopFlowService/CreateOrder

--- REQUEST ---
{
    "customer_id": "customer_12345",
    "items": [
        {
            "product_id": "prod_001",
            "product_name": "Wireless Bluetooth Headphones",
            "quantity": 2,
            "unit_price": 199.99,
            "total_price": 399.98
        },
        {
            "product_id": "prod_002",
            "product_name": "Smart Fitness Watch",
            "quantity": 1,
            "unit_price": 299.99,
            "total_price": 299.99
        }
    ],
    "shipping_address": "123 Main St, San Francisco, CA 94102",
    "billing_address": "123 Main St, San Francisco, CA 94102",
    "payment_method": "credit_card"
}

--- ASSERTS ---
.success == true
.order.id | type == "string"
.order.id | test("^order_")
.order.customer_id == "customer_12345"
.order.items | length == 2
.order.items[0].product_id == "prod_001"
.order.items[0].quantity == 2
.order.items[0].total_price == 399.98
.order.items[1].product_id == "prod_002"
.order.items[1].quantity == 1
.order.items[1].total_price == 299.99
.order.total_amount == 699.97
.order.currency == "USD"
.order.status == "ORDER_STATUS_PENDING"
.order.shipping_address | test("San Francisco")
.order.payment_method == "credit_card"
.order.shipping_cost == 9.99
.order.tax_amount | type == "number"
.order.tax_amount > 0
.created_at | type == "string"
.updated_at | type == "string"

--- OPTIONS ---
timeout: 30
redact: ["created_at", "updated_at"]
