--- ADDRESS ---
localhost:4770

--- TLS ---
ca_cert: ./../server/tls/ca-cert.pem
cert: ./../server/tls/client-cert.pem
key: ./../server/tls/client-key.pem
server_name: localhost
insecure_skip_verify: false

--- ENDPOINT ---
payment.PaymentService/ProcessPayment

--- REQUEST ---
{
  "account_id": "acc_intl_001",
  "merchant_id": "merchant_eu_001",
  "amount": 15000.00,
  "currency": "EUR",
  "payment_method": "swift_wire",
  "risk_level": "high",
  "cross_border_data": {
    "sender_country": "US",
    "recipient_country": "DE",
    "currency_conversion": true,
    "exchange_rate": 0.85,
    "correspondent_bank": "Deutsche Bank AG",
    "swift_code": "DEUTDEFF",
    "purpose_code": "business_services"
  },
  "regulatory_compliance": {
    "gdpr_compliant": true,
    "psd2_compliant": true,
    "fatca_reporting": true,
    "crs_reporting": true,
    "ofac_sanctions_check": true,
    "eu_sanctions_check": true,
    "customer_due_diligence": "enhanced",
    "ultimate_beneficial_owner": "verified"
  },
  "metadata": {
    "transaction_type": "cross_border_payment",
    "regulatory_framework": "PSD2_GDPR_FATCA",
    "data_localization": "EU_compliant",
    "audit_jurisdiction": "multi_jurisdiction"
  }
}

--- ASSERTS ---
.success == true
.transaction_id | test("txn_.*")
.status == "approved"
.message | contains("Cross-border payment processed")
.amount_charged == 15000.00
.currency == "EUR"
.cross_border_validation.sender_country_verified == true
.cross_border_validation.recipient_country_verified == true
.cross_border_validation.exchange_rate_applied == true
.cross_border_validation.correspondent_bank_verified == true
.regulatory_compliance.gdpr_compliance == "verified"
.regulatory_compliance.psd2_compliance == "verified"
.regulatory_compliance.sanctions_check == "clear"
.regulatory_compliance.fatca_status == "reported"
.regulatory_compliance.crs_status == "reported"
.compliance_check.compliance_status == "compliant"
.compliance_check.violations | length == 0
.risk_assessment.cross_border_risk == "assessed"
.risk_assessment.currency_risk == "mitigated"

--- OPTIONS ---
timeout: 30
