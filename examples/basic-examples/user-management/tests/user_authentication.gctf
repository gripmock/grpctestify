# User Authentication Test
# Tests user authentication with token validation

--- ADDRESS ---
localhost:4770

--- ENDPOINT ---
user.UserService/AuthenticateUser

--- REQUEST ---
{
    "username": "john_doe",
    "password": "secure_password_123"
}

--- RESPONSE ---
{
    "success": true,
    "token": "token_12345",
    "user": {
        "id": "user_12345",
        "username": "john_doe",
        "email": "john.doe@example.com",
        "full_name": "John Doe",
        "age": 30,
        "active": true,
        "roles": ["user", "premium"],
        "metadata": {
            "department": "engineering",
            "location": "san_francisco"
        },
        "created_at": "2024-01-15T10:00:00Z",
        "updated_at": "2024-01-15T10:00:00Z"
    },
    "expires_at": "2024-01-16T10:00:00Z",
    "permissions": ["read", "write"]
}

--- ASSERTS ---
.success == true
.token | type == "string"
.token | length > 0
.user.id == "user_12345"
.user.username == "john_doe"
.user.email | test("@")
.user.age | type == "number"
.user.active == true
.user.roles | length >= 1
.user.metadata.department == "engineering"
.expires_at | type == "string"
.permissions | length >= 2
.permissions | contains("read")
.permissions | contains("write")

--- OPTIONS ---
timeout: 30
redact: ["password", "token"]

