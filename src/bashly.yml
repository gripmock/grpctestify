name: grpctestify.sh
help: gRPC Server Testing Tool
version: v1.0.0
filename: commands/root_command.sh

# Dependencies - external commands required by the script
dependencies:
  grpcurl: "Install grpcurl: https://github.com/fullstorydev/grpcurl#installation"
  jq: "Install jq: https://jqlang.github.io/jq/download/"
  bc: "Install bc: sudo apt install bc (Ubuntu/Debian) or brew install bc (macOS)"

# Environment variables
environment_variables:
  - name: grpctestify_address
    help: Default gRPC server address (e.g., localhost:4770)
    default: localhost:4770
  - name: grpctestify_plugin_dir
    help: Directory for external plugins
    default: "~/.grpctestify/plugins"

# Settings for autonomous script generation

# Global flags
flags:
  - long: --no-color
    short: -c
    help: Disable colored output
    arg: false

  - long: --verbose
    short: -v
    help: Enable verbose debug output
    arg: false

  - long: --dry-run
    help: Show commands that would be executed without running them
    arg: false

  - long: --sort
    help: Sort test files by type (path, random, name, size, mtime)
    arg: sort_type
    default: "path"

  - long: --parallel
    help: Run N tests in parallel (default auto-detect CPU count)
    arg: parallel
    default: "auto"

  - long: --timeout
    help: Timeout for individual tests in seconds
    arg: timeout
    default: "30"

  - long: --retry
    help: Number of retries for failed network calls
    arg: retries
    default: "3"

  - long: --retry-delay
    help: Initial delay between retries in seconds
    arg: delay
    default: "1"

  - long: --no-retry
    help: Disable retry mechanisms for network failures
    arg: false

  - long: --update
    help: Check for updates and update the script
    arg: false

  - long: --completion
    help: Install shell completion (bash, zsh, or all)
    arg: shell_type

  - long: --config
    help: Show current configuration
    arg: false

  - long: --init-config
    help: Create default configuration file
    arg: config_file

  - long: --list-plugins
    help: List available plugins
    arg: false

  - long: --create-plugin
    help: Create a new plugin template
    arg: plugin_name

  - long: --log-format
    help: Generate test reports in specified format (junit, json)
    arg: format
    allowed: [junit, json]

  - long: --log-output
    help: Output file for test reports (use with --log-format)
    arg: output_file

# Arguments - main functionality (direct file argument like original)
args:
  - name: test_path
    help: Test file or directory
